(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[629],{757:function(e,t,r){(window.__NEXT_P=window.__NEXT_P||[]).push(["/doctor/consult",function(){return r(8144)}])},8944:function(e,t,r){"use strict";function s(e){let t=Math.round(e/1e3),r=Math.round(e/6e4),s=Math.round(e/36e5),l=Math.floor(e/864e5),a=Math.floor(e/31536e6);return e<6e4?t+(t<2?" second":" seconds"):e<36e5?r+(r<2?" minute":" minutes"):e<864e5?s+(s<2?" hour":" hours"):e<31536e6?l+(l<2?" day":" days"):a+(a<2?" year":" years")}r.d(t,{Z:function(){return s}})},9676:function(e,t,r){"use strict";r.d(t,{Z:function(){return c}});var s=r(5893),l=r(1664),a=r.n(l);r(7294);var n=r(3299),o=r(1163);let i=e=>{let{isDoctor:t}=e,r=(0,o.useRouter)(),l=()=>{(0,n.signOut)({redirect:!1}),r.push("/login")},i=t?"/doctor/":"/";return(0,s.jsx)(s.Fragment,{children:(0,s.jsx)("nav",{className:"sticky top-0 bg-lightMode-btn dark:bg-gray-800 w-100 px-8 md:px-auto",children:(0,s.jsxs)("div",{className:"md:h-16 h-28 mx-auto md:px-4 container flex items-center justify-between flex-wrap md:flex-nowrap",children:[(0,s.jsxs)(a(),{href:"/feed",className:"text-white md:order-1 flex items-center cursor-pointer",children:[(0,s.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-10 w-10",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,s.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M9 3v2m6-2v2M9 19v2m6-2v2M5 9H3m2 6H3m18-6h-2m2 6h-2M7 19h10a2 2 0 002-2V7a2 2 0 00-2-2H7a2 2 0 00-2 2v10a2 2 0 002 2zM9 9h6v6H9V9z"})}),(0,s.jsx)("span",{className:"ml-2 text-2xl font-extrabold tracking-tight leading-tight",children:"AROGYAM"})]}),(0,s.jsx)("div",{className:"order-3 w-full md:w-auto md:order-2",children:(0,s.jsxs)("ul",{className:"text-xl flex justify-around gap-4",children:[(0,s.jsx)("li",{className:"md:px-2 md:py-2 text-white dark:text-white dark:hover:text-slate-400 hover:text-neutral-700",children:(0,s.jsx)(a(),{href:i,children:"Home"})}),(0,s.jsx)("li",{className:"md:px-2 md:py-2 text-white dark:text-white dark:hover:text-slate-400 hover:text-neutral-700",children:(0,s.jsx)(a(),{href:"/feed",children:"Feed"})}),(0,s.jsx)("li",{className:"md:px-2 md:py-2 text-white dark:text-white dark:hover:text-slate-400 hover:text-neutral-700",children:(0,s.jsx)(a(),{href:"".concat(i,"profile"),children:"Profile"})}),t?(0,s.jsx)(s.Fragment,{children:(0,s.jsx)("li",{className:"md:px-2 md:py-2 text-white dark:text-white dark:hover:text-slate-400 hover:text-neutral-700",children:(0,s.jsx)(a(),{href:"/doctor/consult",children:"Consult"})})}):(0,s.jsx)(s.Fragment,{})]})}),(0,s.jsx)("div",{className:"order-2 md:order-3",children:(0,s.jsxs)("button",{className:"px-4 py-2 hover:bg-cyan-700 dark:hover:bg-cyan-900 text-gray-50 rounded-md flex items-center gap-2",onClick:l,children:[(0,s.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",viewBox:"0 0 20 20",fill:"currentColor",children:(0,s.jsx)("path",{fillRule:"evenodd",d:"M3 3a1 1 0 011 1v12a1 1 0 11-2 0V4a1 1 0 011-1zm7.707 3.293a1 1 0 010 1.414L9.414 9H17a1 1 0 110 2H9.414l1.293 1.293a1 1 0 01-1.414 1.414l-3-3a1 1 0 010-1.414l3-3a1 1 0 011.414 0z",clipRule:"evenodd"})}),(0,s.jsx)("span",{children:"Sign Out"})]})})]})})})},d=e=>{let{children:t}=e,{data:r}=(0,n.useSession)();return(0,s.jsx)(s.Fragment,{children:(0,s.jsxs)("div",{className:"w-screen h-screen overflow-hidden flex flex-col",children:[(0,s.jsx)(i,{isDoctor:null==r?void 0:r.user.isDoctor},1),t]})})};var c=d},8144:function(e,t,r){"use strict";r.r(t),r.d(t,{__N_SSP:function(){return v},default:function(){return N}});var s=r(5893),l=r(7294),a=r(6154),n=r(9676),o=r(1163),i=r(1872);let d={_origin:"https://api.emailjs.com"},c=(e,t="https://api.emailjs.com")=>{d._userID=e,d._origin=t},u=(e,t,r)=>{if(!e)throw"The public key is required. Visit https://dashboard.emailjs.com/admin/account";if(!t)throw"The service ID is required. Visit https://dashboard.emailjs.com/admin";if(!r)throw"The template ID is required. Visit https://dashboard.emailjs.com/admin/templates";return!0};class m{constructor(e){this.status=e?e.status:0,this.text=e?e.responseText:"Network Error"}}let x=(e,t,r={})=>new Promise((s,l)=>{let a=new XMLHttpRequest;a.addEventListener("load",({target:e})=>{let t=new m(e);200===t.status||"OK"===t.text?s(t):l(t)}),a.addEventListener("error",({target:e})=>{l(new m(e))}),a.open("POST",d._origin+e,!0),Object.keys(r).forEach(e=>{a.setRequestHeader(e,r[e])}),a.send(t)}),h=(e,t,r,s)=>{let l=s||d._userID;return u(l,e,t),x("/api/v1.0/email/send",JSON.stringify({lib_version:"3.11.0",user_id:l,service_id:e,template_id:t,template_params:r}),{"Content-type":"application/json"})},f=e=>{let t;if(!(t="string"==typeof e?document.querySelector(e):e)||"FORM"!==t.nodeName)throw"The 3rd parameter is expected to be the HTML form element or the style selector of form";return t},p=(e,t,r,s)=>{let l=s||d._userID,a=f(r);u(l,e,t);let n=new FormData(a);return n.append("lib_version","3.11.0"),n.append("service_id",e),n.append("template_id",t),n.append("user_id",l),x("/api/v1.0/email/send-form",n)};var g={init:c,send:h,sendForm:p};let j=e=>{let{consultation:t,doctor:r}=e;return(0,s.jsx)("div",{className:"w-auto min-w-[75%] bg-neutral-100 dark:bg-neutral-800 m-3 rounded-lg flex flex-grow border-[1px] border-neutral-600",children:(0,s.jsxs)("form",{className:"w-full flex flex-col gap-4 p-4",onSubmit:function(e){e.preventDefault(),g.sendForm("service_js0osnq","template_rxsxcuf",e.target,"_VBxc4nEfA5rz_PNP").then(e=>{console.log(e.text)},e=>{console.log(e.text)}),e.target.reset()},children:[(0,s.jsxs)("div",{className:"w-full hidden",children:[(0,s.jsx)("label",{className:"block uppercase tracking-wide  text-xs font-semibold mb-2",htmlFor:"grid-name",children:"Patient Name"}),(0,s.jsx)("input",{className:"appearance-none p-4 block w-full bg-neutral-200 dark:bg-darkMode-componentHead rounded leading-tight placeholder:text-neutral-500 focus:outline-none focus:bg-neutral-300 focus:text-black dark:focus:bg-neutral-800 dark:focus:text-white",id:"grid-name",type:"text",name:"to_name",defaultValue:t.postId.patientId.fullname,placeholder:"Patient name"})]}),(0,s.jsxs)("div",{className:"w-full hidden",children:[(0,s.jsx)("label",{className:"block uppercase tracking-wide text-xs font-semibold mb-2",htmlFor:"grid-doctor-name",children:"Doctor Name"}),(0,s.jsx)("input",{className:"appearance-none p-4 block w-full bg-neutral-200 dark:bg-darkMode-componentHead rounded leading-tight placeholder:text-neutral-500 focus:outline-none focus:bg-neutral-300 focus:text-black dark:focus:bg-neutral-800 dark:focus:text-white",id:"grid-doctor-name",type:"text",name:"doctor_name",placeholder:"Doctor name",defaultValue:r.doctorId.fullname})]}),(0,s.jsxs)("div",{className:"w-full hidden",children:[(0,s.jsx)("label",{className:"block uppercase tracking-wide text-xs font-semibold mb-2",htmlFor:"grid-to-email",children:"To Email"}),(0,s.jsx)("input",{className:"appearance-none p-4 block w-full bg-neutral-200 dark:bg-darkMode-componentHead rounded leading-tight placeholder:text-neutral-500 focus:outline-none focus:bg-neutral-300 focus:text-black dark:focus:bg-neutral-800 dark:focus:text-white",id:"grid-to-email",type:"text",name:"to_email",defaultValue:t.postId.patientId.email,placeholder:"patient email"})]}),(0,s.jsxs)("div",{className:"w-full",children:[(0,s.jsx)("label",{className:"block uppercase tracking-wide text-xs font-semibold mb-2",htmlFor:"grid-to-email",children:"Consultation Timings"}),(0,s.jsx)("input",{className:"appearance-none p-4 block w-full bg-neutral-200 dark:bg-darkMode-componentHead rounded leading-tight placeholder:text-neutral-500 focus:outline-none focus:bg-neutral-300 focus:text-black dark:focus:bg-neutral-800 dark:focus:text-white",id:"grid-to-email",type:"text",name:"timings",defaultValue:"",placeholder:"DD/MM/YYYY Timings"})]}),(0,s.jsx)("div",{className:"flex flex-row  justify-center",children:(0,s.jsx)("button",{type:"submit",value:"Send",className:"text-sm p-2 w-1/3 font-medium bg-lightMode-btn dark:bg-darkMode-btn rounded-md text-white",children:"Send"})})]})})};var b=r(8944);let w=e=>{let{doctor:t,consultations:r}=e,d=(0,o.useRouter)(),c=()=>{d.replace(d.asPath)},[u,m]=(0,l.useState)("");return(0,s.jsx)(n.Z,{children:(0,s.jsx)("div",{className:"h-full flex overflow-y-scroll scrollbar-thin p-4 bg-lightMode-background dark:bg-darkMode-background text-lightMode-txt dark:text-darkMode-txt justify-center items-start w-full",children:(0,s.jsxs)("div",{className:"max-w-7xl min-w-[60%] ",children:[(0,s.jsx)("h1",{className:"m-2 text-2xl tracking-tight font-sans border-b-[1px] border-neutral-400  pb-1 mb-8",children:"Your Consultations"}),(0,s.jsx)("div",{className:"gap-4 px-2 flex flex-wrap lg:justify-start md:justify-start justify-center",children:r.map(e=>{let r=new Date().getTime()-new Date(e.postId.createdAt),l=async()=>{await a.Z.post("/api/user/doctor/consultation/".concat(e._id),{doctorId:e.doctorRefId,postId:e.postId._id}),c()},n=()=>{""===u?m(e._id):m("")};return(0,s.jsx)(s.Fragment,{children:(0,s.jsxs)("div",{className:"w-[25rem] h-fit flex justify-between items-center bg-lightMode-component dark:bg-darkMode-component shadow-md flex-col rounded-lg",children:[(0,s.jsxs)("div",{className:"w-full h-[21rem] flex flex-col justify-between gap-2",children:[(0,s.jsxs)("div",{className:"w-full h-fit flex bg-neutral-300 dark:bg-neutral-800 py-2 rounded-t-lg px-4 content-center items-center",children:[(0,s.jsxs)("div",{className:"w-full content-center  items-center flex flex-row",children:[(0,s.jsx)("img",{className:"w-[2rem] h-[2rem] rounded-full",src:e.postId.patientId.profile,alt:"img"}),(0,s.jsxs)("div",{className:"flex pl-2 flex-col",children:[(0,s.jsx)("span",{className:"w-full text-md  tracking-tight ",children:e.postId.patientId.fullname}),(0,s.jsxs)("span",{className:"text-[9px]",children:[(0,b.Z)(r)," ago"]})]})]}),e.isAccepted?(0,s.jsx)("span",{className:"text-center text-xl font-sans font-semibold w-24 h-8 justify-center items-center rounded-sm  bg-lightMode-btn  dark:bg-darkMode-btn flex flex-row text-white dark:text-neutral-300",children:"PAID"}):(0,s.jsx)("span",{className:"text-center text-xl font-sans font-semibold w-24 h-8 justify-center items-center rounded-sm bg-red-400 dark:bg-red-900 flex flex-row text-white dark:text-neutral-300",children:e.fee})]}),(0,s.jsxs)("div",{className:"w-full h-[17rem] flex flex-col justify-evenly items-center gap-2",children:[(0,s.jsxs)("p",{className:"w-full h-2/5 px-5 flex flex-col gap-2 text-justify text-sm overflow-auto",children:["Low"===e.postId.severity?(0,s.jsxs)("span",{className:"text-sm  flex flex-row pr-5 w-full justify-center",children:[(0,s.jsxs)("span",{className:"mr-2 font-semibold",children:["Severity -"," "]}),(0,s.jsx)(i.ePU,{className:"md:text-xl mr-2"}),(0,s.jsx)("span",{className:"uppercase text-sm",children:"low"})]}):"Medium"===e.postId.severity?(0,s.jsxs)("span",{className:"text-sm flex flex-row pr-5 w-full justify-center",children:[(0,s.jsxs)("span",{className:"font-semibold mr-2",children:["Severity -"," "]}),(0,s.jsx)(i.DC9,{className:"md:text-xl mr-2"}),(0,s.jsx)("span",{className:"uppercase text-sm",children:"Medium"})]}):(0,s.jsxs)("span",{className:"text-sm flex flex-row pr-5 w-full justify-center",children:[(0,s.jsxs)("span",{className:"font-semibold mr-2",children:["Severity -"," "]}),(0,s.jsx)(i.eEn,{className:"md:text-xl mr-2"}),(0,s.jsx)("span",{className:"uppercase text-sm",children:"High"})]})," ",e.postId.description]}),(0,s.jsx)("div",{className:"h-3/5 w-full flex justify-center",children:(0,s.jsx)("img",{className:"object-contain h-full",src:e.postId.image,alt:""})})]})]}),(0,s.jsx)("div",{className:"h-fit flex justify-center w-full rounded-b-lg",children:(0,s.jsx)("div",{className:"w-fit text-xl flex justify-center items-center cursor-pointer",children:(0,s.jsx)("span",{className:"text-md w-full flex flex-row justify-evenly font-bold tracking-tight leading-tight p-2",children:e.isAccepted?(0,s.jsxs)("div",{className:"bg-neutral-300 dark:bg-neutral-700 hover:bg-neutral-500 flex hover:text-white text-neutral-800 dark:text-neutral-200 px-2 py-2 rounded-sm",children:[(0,s.jsx)("span",{className:"material-symbols-outlined",children:"mail"}),(0,s.jsx)("p",{className:"ml-2 text-base font-normal",onClick:n,children:"Send Mail"})]}):(0,s.jsxs)("div",{className:"bg-neutral-300 dark:bg-neutral-700 flex text-neutral-800 hover:bg-red-500/50 hover:border-0 dark:text-neutral-200 px-2 py-2 rounded-sm",children:[(0,s.jsx)("span",{className:"material-symbols-outlined",children:"do_not_disturb_on"}),(0,s.jsx)("p",{className:"ml-2 text-base font-normal",onClick:l,children:"Revoke consultation"})]})})})}),u===e._id&&(0,s.jsx)(j,{doctor:t,consultation:e},1)]})})})})]})})})};var v=!0,N=w},8357:function(e,t,r){"use strict";r.d(t,{w_:function(){return i}});var s=r(7294),l={color:void 0,size:void 0,className:void 0,style:void 0,attr:void 0},a=s.createContext&&s.createContext(l),n=function(){return(n=Object.assign||function(e){for(var t,r=1,s=arguments.length;r<s;r++)for(var l in t=arguments[r])Object.prototype.hasOwnProperty.call(t,l)&&(e[l]=t[l]);return e}).apply(this,arguments)},o=function(e,t){var r={};for(var s in e)Object.prototype.hasOwnProperty.call(e,s)&&0>t.indexOf(s)&&(r[s]=e[s]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols)for(var l=0,s=Object.getOwnPropertySymbols(e);l<s.length;l++)0>t.indexOf(s[l])&&Object.prototype.propertyIsEnumerable.call(e,s[l])&&(r[s[l]]=e[s[l]]);return r};function i(e){return function(t){return s.createElement(d,n({attr:n({},e.attr)},t),function e(t){return t&&t.map(function(t,r){return s.createElement(t.tag,n({key:r},t.attr),e(t.child))})}(e.child))}}function d(e){var t=function(t){var r,l=e.attr,a=e.size,i=e.title,d=o(e,["attr","size","title"]),c=a||t.size||"1em";return t.className&&(r=t.className),e.className&&(r=(r?r+" ":"")+e.className),s.createElement("svg",n({stroke:"currentColor",fill:"currentColor",strokeWidth:"0"},t.attr,l,d,{className:r,style:n(n({color:e.color||t.color},t.style),e.style),height:c,width:c,xmlns:"http://www.w3.org/2000/svg"}),i&&s.createElement("title",null,i),e.children)};return void 0!==a?s.createElement(a.Consumer,null,function(e){return t(e)}):t(l)}}},function(e){e.O(0,[994,424,154,774,888,179],function(){return e(e.s=757)}),_N_E=e.O()}]);